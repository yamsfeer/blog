# 网络优化



* 使用 http2

  兼容性：当浏览器不支持 http2 时，要降级

  早期浏览器会限制同一个域名下的并发请求连接数，因此以前可以将资源放在不同的域名下，但在 http2 中，为了支持多路复用，反而应该放在同一域名下。

* 开启 brotli 压缩

  ```http
  accept-encoding: gzip,deflate,br
  ```

  与 gzip 相比，brotli 压缩具有更高的压缩比和压缩速度。

* 使用 https

  优化手段：如 session resume、OCSP stapling 等可以提升 https 性能

* CDN 部署静态资源

* DNS 预解析

  ```html
  <link rel="dns-prefetch" href="xx.com">
  ```

  

* 提前建立网络连接

  ```html
  <link rel="preconnect" href="xx.com">
  ```





## 预链接

DNS 预解析

```html
<link rel="dns-prefetch" href="xx.com">
```

提前建立网络连接

```html
<link rel="preconnect" href="xx.com"> 
```

[Establish network connections early to improve perceived page speed](https://web.dev/preconnect-and-dns-prefetch/)

## http2 并发请求

http2 的图像并发请求

浏览器在同一时间对同一域名下的资源的并发请求数是有限的，一般在 2-6 之间，超过限制数的请求会被阻塞，chrome 对 HTTP1.1 最大并发连接数为 6。

http2 一个站点只有一个连接。每个请求为一个流，每个请求被分为多个二进制帧，不同流中的帧可以交错的发送，实现多路复用。这就解决了连接数限制的问题。

## http2 推送



## CDN



## 参考

[HTTP2 协议长文详解](https://www.cnblogs.com/jiujuan/p/16939688.html)

[深入剖析HTTP3协议](https://zhuanlan.zhihu.com/p/431672713)

