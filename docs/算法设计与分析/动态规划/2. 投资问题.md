# 投资问题

问题：$m$元钱，$n$项投资，$f_i(x)$：将$x$元投入第$i$个项目的收益，求使得总收益最大的投资方案

给问题建模，确定目标函数、约束条件和解的形式：

* 解：向量$<x_1,x_2,...,x_n>$，$x_i$是投给项目$i$的钱数，$i=1,2,3,...,n$
* 目标函数：$max\left\{f_1(x_1) + f_2(x_2) + ... + f_n(x_n)\right\}$

* 约束条件：$x_1+x_2+...+x_n = m, x_i \in N$

假设有5万元钱，4个项目，投资收益如下表：

| $x$  | $f_1(x)$ | $f_2(x)$ | $f_3(x)$ | $f_4(x)$ |
| :--: | :------: | :------: | :------: | :------: |
|  0   |    0     |    0     |    0     |    0     |
|  1   |    11    |    0     |    2     |    20    |
|  2   |    12    |    5     |    10    |    21    |
|  3   |    13    |    10    |    30    |    22    |
|  4   |    14    |    15    |    32    |    23    |
|  5   |    15    |    20    |    40    |    24    |

*(比如$f_2(3) = 10$表示给项目2投资3万元，收益为10万元）*

## 优化函数

$F_k(x)$：$x$元钱投给前$k$个项目的最大收益，比如$F_3(5) = m$表示给项目1，2，3共投资5万元的最大收益为$m$万元。

**递推方程**：$F_k(x)= max \{ f_k(x_k) + F_{k-1}(x-x_k) \} \quad k>1, 0 \leq x_k \leq x$

**边界条件**：$F_1(x)=f_1(x)$

## 计算过程

* $k=1$
  
  $F_1(1)=11,F_1(2)=12,F_1(3)=13,F_1(4)=14,F_1(5)=15$
  
* $k=2$

  * 方案：$(0,1),(1,0)$

    $F_2(1)=max \{ f_2(1),f_1(1) \} = 11$

    选择$(1,0)$方案

  * 方案：$(0,2),(1,1),(2,0)$

    $F_2(2)=max \{ f_2(2),F_1(1) + f_2(1),F_1(2) \} = 12$

    选择$(2,0)$方案

  * 方案：$(0,3),(1,2),(2,1),(3,0)$

    $F_2(3)=max\{ f_2(3),F_1(1) + f_2(2),F_1(2) + f_2(1),F_1(3) \} = 16$

    选择$(1,2)$方案

  * 以此类推，得到$F_2(4)=21, F_2(5) = 26$。

根据以上方法，将$k=1,2,3,4$的所有情况计算得以下**备忘录**

其中右侧的$x_n(x)$表示最后一个项目分配的钱数，比如$F_3(2) , x_3(2) \Rightarrow (13,1)$表示当$F_3(2) = 13$时，第三个项目分配1万元。

|  x   | $F_1(x) , x_1(x)$ | $F_2(x) , x_2(x)$ | $F_3(x) , x_3(x)$ | $F_4(x) , x_4(x)$ |
| :--: | :---------------: | :---------------: | :---------------: | :---------------: |
|  1   |     $(11,1)$      |     $(11,0)$      |     $(11,0)$      |     $(20,1)$      |
|  2   |     $(12,2)$      |     $(12,0)$      |     $(13,1)$      |     $(31,1)$      |
|  3   |     $(13,3)$      |     $(16,2)$      |     $(30,3)$      |     $(33,1)$      |
|  4   |     $(14,4)$      |     $(21,3)$      |     $(41,3)$      |     $(50,1)$      |
|  5   |     $(15,5)$      |     $(26,4)$      |     $(43,4)$      |     $(61,1)$      |

根据上表可知，投资的最大收益为61，此时第四个项目投资1万元，那么前三个项目的投资钱数为4万元，由此可查$x_3(4)$为3万元，以此类推。推导过程如下：
* $x_4(5)=1 \Rightarrow x_4=1,x_3(5-1)=x_3(4)$

* $x_3(4)=3 \Rightarrow x_3=3,x_2(4-3)=x_2(1)$

* $x_2(1)=0 \Rightarrow x_2=0,x_1(1-0)=x_1(1)$

* $x_1(1)=1 \Rightarrow x_1=1$

综上，整个投资的方案为：$x_1=1,x_2=0,x_3=3,x_4=1 \quad F_4(5)=61$

## 时间复杂度

若**备忘录**中有$m$行$n$列，共$m*n$项，那么投资问题的时间复杂度为$O(nm^2)$。

